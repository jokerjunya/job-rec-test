# Netlify対応の修正事項

## 問題点

### 1. SQLiteデータベースの問題（最重要）
- `better-sqlite3`はネイティブモジュールで、Netlifyのサーバーレス環境では動作しない
- ファイルシステムへの書き込みが制限されている
- データベースファイルがデプロイ時に存在しない

### 2. 動的レンダリングの問題
- API Routesが`nextUrl.searchParams`を使用しているため、静的生成ができない
- Netlifyでは動的ルートを明示的に設定する必要がある

### 3. ビルド時のエラー
- データベースファイルが存在しない状態でビルドが実行される

## 修正方針

### オプション1: JSONファイルベースのデータストア（推奨）
- SQLiteの代わりにJSONファイルを使用
- 読み取り専用データとして扱う
- インタラクションは一時的にメモリに保存（または外部APIへ）

### オプション2: 外部データベースサービス
- Vercel Postgres、Supabase、PlanetScaleなど
- ただし、設定が複雑になる

### オプション3: API Routesの動的設定
- `export const dynamic = 'force-dynamic'`を追加
- ただし、SQLiteの問題は解決しない

## 推奨修正順序

1. **JSONファイルベースのデータストアに変更**
2. **API Routesに動的設定を追加**
3. **Netlify設定ファイルの追加**
4. **ビルドスクリプトの調整**

